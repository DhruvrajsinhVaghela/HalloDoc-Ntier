@using System.Globalization;

@* @model HalloDoc.DbEntity.ViewModel.AdminDashboardVM; *@
@model IEnumerable<HalloDoc.DbEntity.ViewModel.AdminDashboardVM>;
<div class="table-responsive d-none d-md-block vh-100">
    <table class="table" id="tbl">
        <thead>
            <tr>
                <th scope="col" class="text-clr">Name</th>
                <th scope="col" class="text-clr">Date Of Birth</th>
                <th scope="col" class="text-clr">Requestor</th>
                <th scope="col" class="text-clr">Requested date</th>
                <th scope="col" class="text-clr">Phone</th>
                <th scope="col" class="text-clr">Address</th>
                <th scope="col" class="text-clr">Notes</th>
                <th scope="col" class="text-clr">Chat With</th>
                <th scope="col" class="text-clr">Actions</th>

                @*   @if (Model.requestListAdminDash.Any(obj => obj.Status == 2 || obj.Status == 3))
                {
                <th scope="col">Physician Name</th>
                <th scope="col">Date Of Service</th>
                }

                else if (Model.requestListAdminDash.Any(obj => obj.Status == 6))
                {
                <th scope="col">Region</th>
                }
                *@

            </tr>
        </thead>
        <tbody>

            @foreach (var obj in Model)
            {
                string cls = "bg-warning";
                string name = "";
                string ID = "a" + obj.ReqID.ToString();
                {
                    if (obj.RequestType == 1)
                    {
                        cls = "bg-success";
                        name = "Patient";
                    }
                    else if (obj.RequestType == 2)
                    {
                        cls = "bg-warning";
                        name = "Family/Friend";
                    }
                    else if (obj.RequestType == 3)
                    {
                        cls = "bg-info";
                        name = "Concierge";
                    }
                    else if (obj.RequestType == 4)
                    {
                        cls = "bg-danger";
                        name = "Business";
                    }
                }

                <tr class="align-middle @cls ">
                    <td class="text-white">
                        <div class="d-flex justify-content-between">
                            <span>@obj.PatientName</span>
                            <div class="border border-white rounded-2 justify-content-center d-flex ms-3 p-2">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-envelope text-white" viewBox="0 0 16 16">
                                    <path d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1zm13 2.383-4.708 2.825L15 11.105zm-.034 6.876-5.64-3.471L8 9.583l-1.326-.795-5.64 3.47A1 1 0 0 0 2 13h12a1 1 0 0 0 .966-.741M1 11.105l4.708-2.897L1 5.383z" />
                                </svg>
                            </div>
                        </div>
                    </td>
                    <td class="text-white">@obj.BirthDate</td>
                    <td class="text-white">@obj.RequestorName</td>
                    <td class="text-white">@obj.RequestDate.ToString("MMM-dd-yyyy",CultureInfo.InvariantCulture)</td>
                    <td class="text-white">
                        @if (obj.RequestorPhoneNumber == obj.Phonenumber)
                        {
                            obj.RequestorPhoneNumber = "";
                        }
                        @if (obj.Phonenumber != "")
                        {
                            <button class="btn px-1 btn-outline-light d-flex">
                                <span>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-telephone" viewBox="0 0 16 16">
                                        <path d="M3.654 1.328a.678.678 0 0 0-1.015-.063L1.605 2.3c-.483.484-.661 1.169-.45 1.77a17.6 17.6 0 0 0 4.168 6.608 17.6 17.6 0 0 0 6.608 4.168c.601.211 1.286.033 1.77-.45l1.034-1.034a.678.678 0 0 0-.063-1.015l-2.307-1.794a.68.68 0 0 0-.58-.122l-2.19.547a1.75 1.75 0 0 1-1.657-.459L5.482 8.062a1.75 1.75 0 0 1-.46-1.657l.548-2.19a.68.68 0 0 0-.122-.58zM1.884.511a1.745 1.745 0 0 1 2.612.163L6.29 2.98c.329.423.445.974.315 1.494l-.547 2.19a.68.68 0 0 0 .178.643l2.457 2.457a.68.68 0 0 0 .644.178l2.189-.547a1.75 1.75 0 0 1 1.494.315l2.306 1.794c.829.645.905 1.87.163 2.611l-1.034 1.034c-.74.74-1.846 1.065-2.877.702a18.6 18.6 0 0 1-7.01-4.42 18.6 18.6 0 0 1-4.42-7.009c-.362-1.03-.037-2.137.703-2.877z" />
                                    </svg>
                                </span>
                                @obj.Phonenumber
                            </button>
                            <div>Patient</div>
                        }
                        @if (obj.RequestorPhoneNumber != "")
                        {
                            <button class="btn px-1 btn-outline-light d-flex">
                                <span>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-telephone" viewBox="0 0 16 16">
                                        <path d="M3.654 1.328a.678.678 0 0 0-1.015-.063L1.605 2.3c-.483.484-.661 1.169-.45 1.77a17.6 17.6 0 0 0 4.168 6.608 17.6 17.6 0 0 0 6.608 4.168c.601.211 1.286.033 1.77-.45l1.034-1.034a.678.678 0 0 0-.063-1.015l-2.307-1.794a.68.68 0 0 0-.58-.122l-2.19.547a1.75 1.75 0 0 1-1.657-.459L5.482 8.062a1.75 1.75 0 0 1-.46-1.657l.548-2.19a.68.68 0 0 0-.122-.58zM1.884.511a1.745 1.745 0 0 1 2.612.163L6.29 2.98c.329.423.445.974.315 1.494l-.547 2.19a.68.68 0 0 0 .178.643l2.457 2.457a.68.68 0 0 0 .644.178l2.189-.547a1.75 1.75 0 0 1 1.494.315l2.306 1.794c.829.645.905 1.87.163 2.611l-1.034 1.034c-.74.74-1.846 1.065-2.877.702a18.6 18.6 0 0 1-7.01-4.42 18.6 18.6 0 0 1-4.42-7.009c-.362-1.03-.037-2.137.703-2.877z" />
                                    </svg>
                                </span>
                                @obj.RequestorPhoneNumber
                            </button>
                            <div>@name</div>
                        }

                    </td>
                    <td class="text-white">@obj.Address</td>
                    <td class="text-white">@obj.Notes</td>
                    <td class="text-white">
                        @*  @if (@obj.ChatWith != null)
                    {
                    <button class="btn btn-outline-secondary d-none d-md-block">Provider</button>
                    } *@
                        <a class="btn btn-secondary bg-transparent border-white d-flex justify-content-between" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            <span><img src="~/images/icons8-medical-doctor-50.png" width="16" height="16"></span>Provider
                        </a>
                    </td>
                    <td class="text-white">
                        <div class="dropdown">

                            <a class="btn btn-secondary bg-transparent border-white" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                Actions
                            </a>

                            <ul class="dropdown-menu">
                                <li class="d-flex align-items-center ms-2">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-journal-bookmark" viewBox="0 0 16 16">
                                        <path fill-rule="evenodd" d="M6 8V1h1v6.117L8.743 6.07a.5.5 0 0 1 .514 0L11 7.117V1h1v7a.5.5 0 0 1-.757.429L9 7.083 6.757 8.43A.5.5 0 0 1 6 8" />
                                        <path d="M3 0h10a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-1h1v1a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v1H1V2a2 2 0 0 1 2-2" />
                                        <path d="M1 5v-.5a.5.5 0 0 1 1 0V5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1zm0 3v-.5a.5.5 0 0 1 1 0V8h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1zm0 3v-.5a.5.5 0 0 1 1 0v.5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1z" />
                                    </svg>
                                    <a onclick="Assign(@obj.ReqID)">Assign Case</a>
                                </li>
                                <li class="d-flex align-items-center ms-2">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-circle" viewBox="0 0 16 16">
                                        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16" />
                                        <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708" />
                                    </svg>
                                    <a onclick="Cancel(@obj.ReqID)">Cancle Case</a>
                                </li>
                                <li class="d-flex align-items-center ms-2">

                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                                        <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0" />
                                    </svg>
                                    <a asp-action="ViewReservation" asp-controller="Admin" asp-route-id="@obj.ReqID">View Case</a>
                                </li>
                                <li class="d-flex align-items-center ms-2">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-journal-text" viewBox="0 0 16 16">
                                        <path d="M5 10.5a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5m0-2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5m0-2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5m0-2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5" />
                                        <path d="M3 0h10a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-1h1v1a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v1H1V2a2 2 0 0 1 2-2" />
                                        <path d="M1 5v-.5a.5.5 0 0 1 1 0V5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1zm0 3v-.5a.5.5 0 0 1 1 0V8h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1zm0 3v-.5a.5.5 0 0 1 1 0v.5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1z" />
                                    </svg>
                                    <a asp-action="ViewNotes" asp-controller="Admin" asp-route-id="@obj.ReqID">View Notes</a>
                                </li>
                                <li class="d-flex align-items-center ms-2">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-ban" viewBox="0 0 16 16">
                                        <path d="M15 8a6.97 6.97 0 0 0-1.71-4.584l-9.874 9.875A7 7 0 0 0 15 8M2.71 12.584l9.874-9.875a7 7 0 0 0-9.874 9.874ZM16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0" />
                                    </svg>
                                    <a onclick="Block(@obj.ReqID)">Block Patinet</a>
                                </li>
                            </ul>
                        </div>
                    </td>


                </tr>

            }
        </tbody>
    </table>

    <div class="w-100 d-flex justify-content-center mb-5">
        <nav aria-label="Page navigation example">
            <ul class="pagination">

                @{
                    double? ItemOnPage = 2;
                    var i = 1;
                    double? pagecount = 0;
                    if (Model.FirstOrDefault()?.ItemCountPagination != null)
                    {
                         pagecount = Model.FirstOrDefault()!.ItemCountPagination;
                    }
                   
                    double? totalPages = 0;
                    if (pagecount % ItemOnPage == 0)
                    {
                        totalPages = pagecount / ItemOnPage;
                    }
                    else
                    {
                        totalPages = (pagecount / ItemOnPage) + 0.5;
                    }
                            <li class="page-item" id="previous"><a class="page-link" onclick="Previous()">Previous</a></li>
                            <li class="page-item"><a class="page-link" id="CurrentTab">@i</a></li>
                            <li class="page-item" id="next"><a class="page-link" onclick="Next(@totalPages,@i)">Next</a></li>

                }
            </ul>
        </nav>
    </div>
</div>
@foreach (var obj in Model)
{
    string cls = "text-warning";
    string name = "";
    {
        if (obj.RequestType == 1)
        {
            cls = "text-success";
            name = "Patient";

        }
        else if (obj.RequestType == 2)
        {
            cls = "text-warning";
            name = "Family/Friend";
        }
        else if (obj.RequestType == 3)
        {
            cls = "text-info";
            name = "Concierge";
        }
        else if (obj.RequestType == 4)
        {
            cls = "text-danger";
            name = "Business";
        }
    }

    DateTime ReqDate = new DateTime(obj.RequestDate.Year, obj.RequestDate.Month, obj.RequestDate.Day);
    TimeSpan myDateResult = DateTime.Now - ReqDate;
    int hours = (int)myDateResult.TotalHours;
    int minutes = myDateResult.Minutes;

    string ID = "a" + obj.ReqID.ToString();


    <div class="accordion d-md-none" id="accordionExample">
        <div class="accordion-item">
            <h2 class="accordion-header">
                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#@ID" aria-expanded="true" aria-controls="collapseOne">
                    <div class="w-100">
                        <div class="d-flex w-100 justify-content-between p-2">
                            <div>@obj.PatientLastName @obj.PatientName</div>
                            <div>
                                <div class="d-md-flex gap-1 mx-auto text-center align-items-center">
                                    <span>@name</span>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-circle-fill @cls" viewBox="0 0 16 16">
                                        <circle cx="8" cy="8" r="8" />
                                    </svg>
                                </div>
                            </div>
                        </div>
                        <div class="d-flex justify-content-between w-100 p-2">
                            <div>
                                <p>@obj.Street @obj.City</p>
                                <p>@obj.State @obj.ZipCode</p>
                            </div>
                            <div>
                                <div class="border border-info  rounded-3 px-2 py-1 text-decoration-none text-info">
                                    Map Location
                                </div>
                            </div>
                        </div>
                        <div>
                            <div>
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clock text-info" viewBox="0 0 16 16">
                                    <path d="M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71z" />
                                    <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16m7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0" />
                                </svg>
                                <span>
                                    Wait Time:@obj.RequestDate
                                    <span> (@hours:@myDateResult.Minutes) </span>

                                </span>
                            </div>

                        </div>
                    </div>

                </button>
            </h2>
            <div id="@ID" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
                <div class="accordion-body vh-100">
                    <div>
                        <hr>
                        <div class="w-100 d-flex justify-content-end">

                            <button class="btn border rounded-pill border-info ViewCaseBtn">
                                View Case
                            </button>
                        </div>
                        <p>
                            <div class="d-flex align-items-center">

                                <div class="border border-2 px-2 py-1 rounded-circle border-info">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-calendar4-week" viewBox="0 0 16 16">
                                        <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5M2 2a1 1 0 0 0-1 1v1h14V3a1 1 0 0 0-1-1zm13 3H1v9a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1z" />
                                        <path d="M11 7.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zm-3 0a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zm-2 3a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zm-3 0a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5z" />
                                    </svg>
                                </div>
                                <span class="ms-2">Date Of Birth: @obj.BirthDate</span>
                            </div>
                        </p>
                        <p>
                            <div class="d-flex align-items-center">

                                <div class="border border-2 px-2 py-1 rounded-circle border-info">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-envelope" viewBox="0 0 16 16">
                                        <path d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1zm13 2.383-4.708 2.825L15 11.105zm-.034 6.876-5.64-3.471L8 9.583l-1.326-.795-5.64 3.47A1 1 0 0 0 2 13h12a1 1 0 0 0 .966-.741M1 11.105l4.708-2.897L1 5.383z" />
                                    </svg>
                                </div>
                                <span class="ms-2">Email: @obj.Email</span>
                            </div>
                        </p>
                        <p>
                            <div class="d-flex align-items-center">

                                <div class="border border-2 px-2 py-1 rounded-circle border-info">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-telephone" viewBox="0 0 16 16">
                                        <path d="M3.654 1.328a.678.678 0 0 0-1.015-.063L1.605 2.3c-.483.484-.661 1.169-.45 1.77a17.6 17.6 0 0 0 4.168 6.608 17.6 17.6 0 0 0 6.608 4.168c.601.211 1.286.033 1.77-.45l1.034-1.034a.678.678 0 0 0-.063-1.015l-2.307-1.794a.68.68 0 0 0-.58-.122l-2.19.547a1.75 1.75 0 0 1-1.657-.459L5.482 8.062a1.75 1.75 0 0 1-.46-1.657l.548-2.19a.68.68 0 0 0-.122-.58zM1.884.511a1.745 1.745 0 0 1 2.612.163L6.29 2.98c.329.423.445.974.315 1.494l-.547 2.19a.68.68 0 0 0 .178.643l2.457 2.457a.68.68 0 0 0 .644.178l2.189-.547a1.75 1.75 0 0 1 1.494.315l2.306 1.794c.829.645.905 1.87.163 2.611l-1.034 1.034c-.74.74-1.846 1.065-2.877.702a18.6 18.6 0 0 1-7.01-4.42 18.6 18.6 0 0 1-4.42-7.009c-.362-1.03-.037-2.137.703-2.877z" />
                                    </svg>
                                </div>
                                <span class="ms-2">Patient: @obj.Phonenumber</span>
                            </div>
                        </p>
                        <p>
                            <div class="d-flex align-items-center">

                                <div class="border border-2 px-2 py-1 rounded-circle border-info">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-person" viewBox="0 0 16 16">
                                        <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6m2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0m4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4m-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10s-3.516.68-4.168 1.332c-.678.678-.83 1.418-.832 1.664z" />
                                    </svg>
                                </div>
                                <span class="ms-2">Requestor: @obj.RequestorName</span>
                            </div>
                        </p>
                    </div>

                    <div class="container">
                        <div class="row">
                            <div class="col-6 text-nowrap">
                                <button class="btn rounded-pill bg-warning  py-1 w-100 d-flex justify-content-center" onclick="Assign(@obj.ReqID)">Assign Case</button>
                            </div>
                            <div class="col-6 text-nowrap">
                                <button class="btn rounded-pill bg-danger  py-1 w-100 d-flex justify-content-center" onclick="Cancel(@obj.ReqID)">Cancel Case</button>

                            </div>
                        </div>
                        <div class="row my-2">
                            <div class="col-6 text-nowrap">
                                <a asp-action="ViewNotes" asp-controller="Admin" asp-route-id="@obj.ReqID" class="text-decoration-none">
                                    <div class="btn rounded-pill bg-success  py-1 w-100 d-flex justify-content-center ">View Notes</div>
                                </a>
                            </div>
                            <div class="col-6 text-nowrap">
                                <button class="btn rounded-pill bg-danger  py-1 w-100 d-flex justify-content-center" onclick="Block(@obj.ReqID)">Block Patient</button>
                            </div>
                        </div>
                        <div class="row my-2">
                            <div class="col-6 text-nowrap">
                                <button class="btn rounded-pill bg-success px-5 py-1 w-100 d-flex justify-content-center">Email</button>
                            </div>

                        </div>
                    </div>

                </div>
            </div>
        </div>

    </div>
    <div id="showmodal">
    </div>
}
<script>
    function Next(totalpages) {
        
        var a = $('#CurrentTab').text();
        var b = parseInt(a);
        b = b + 1;

        if (b <= totalpages) {

            pagination(b, @ItemOnPage);
        }

    }
    function Previous() {
        var a = $('#CurrentTab').text();
        var b = parseInt(a);
        b = b - 1;

        if (b > 0) {
            pagination(b, @ItemOnPage);
        }
    }
    function pagination(number, itemsperpage) {

        
        $.ajax({
            url: '/Admin/Page',
            method: 'POST',
            data: {
                status: 1,
                pn: number,
                item: itemsperpage,
            },
            success: function (response) {
                
                $('#Content').html(response);
                $('#CurrentTab').html(number);
            },
            error: function (error) {
                console.error('Error in AJAX', error);
            }
        })
       
    }

    function Cancel(id) {
        $('#showmodal').load('/Admin/CancelCase/' + id, () => {

            const modal = new bootstrap.Modal(document.getElementById('Cancel'));
            console.log(modal);
            modal.show();
        });
    }

    function Assign(id) {
        $('#showmodal').load('/Admin/AssignCase/' + id, () => {
            const modal = new bootstrap.Modal(document.getElementById('Assign'));
            console.log(modal);
            modal.show();
        });
    }

    function Block(id) {
        $('#showmodal').load('/Admin/BlockCase/' + id, () => {
            const modal = new bootstrap.Modal(document.getElementById('Block'));
            console.log(modal);
            modal.show();
        });
    }

    function SendAgreement(id) {
        $('#showmodal').load('/Admin/SendAgreement/' + id, () => {
            const modal = new bootstrap.Modal(document.getElementById('Send'));
            console.log(modal);
            modal.show();
        });
    }

    function Transfer(id) {
        $('#showmodal').load('/Admin/TransferCase/' + id, () => {
            const modal = new bootstrap.Modal(document.getElementById('Transfer'));
            console.log(modal);
            modal.show();
        });
    }

    function Clear(id) {
        $('#showmodal').load('/Admin/ClearCase/' + id, () => {

            const modal = new bootstrap.Modal(document.getElementById('Clear'));
            console.log(modal);
            modal.show();
        });
    }
    var Id;
    var k;
    function FilterData(id) {
        search = document.getElementById("search");
        k = search.value.toUpperCase();
        debugger;
        var select = document.getElementById("Dropdown");
        var selectvalue = select.value;
        console.log(selectvalue);
        console.log(k);
        if (id != undefined) {
            Id = id;
        }
        let xhr = new XMLHttpRequest();
        let url = '/Admin/SortByFilter';



        xhr.open('POST', url, true);
        xhr.setRequestHeader('Content-type', 'application/json');
        xhr.onreadystatechange = function () {
            if (this.readyState === 4 && this.status === 200) {
                document.getElementById("Content").innerHTML = (this.responseText);
            }
        };
        xhr.setRequestHeader('Content-Type', 'application/json');
        xhr.send(JSON.stringify({ keywrd: k, RegId: selectvalue, status: 1, RequestTypeId: Id }));

    }

</script>