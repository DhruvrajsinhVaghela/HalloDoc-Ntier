@using System.Globalization;
@model HalloDoc.DbEntity.ViewModel.ViewUploadVM 
@{
    ViewData["Title"] = "View Uploads";
    Layout = "_layoutAdmin";
    ViewBag.cssLink = "AdminDashboard.css";
}

<div class="bg-body-tertiary vh-100 d-flex flex-column">
            <partial name="_AdminHeaderDashboard" />
    <div class="tab-content mt-5 m-auto dashboard-div" id="myTabContent">

        <div class="tab-pane fade show active" id="home-tab-pane" role="tabpanel" aria-labelledby="home-tab" tabindex="0">

            <div class="d-flex justify-content-between ">
                <h4>Documents</h4>
                <a asp-action="AdminDashboard"><button class="btn border rounded-3 btn-outline-info mb-1 border-info">
                    &lt; Back
                    </button>
                </a>
            </div>

            <div class="border rounded d-flex justify-content-center shadow-lg" id="main-div">
                <div class="notes-div">
                    <div>Patient Name</div>
                    <p>
                        <span class="text-info fw-bold">@Model.PatientName </span>
                        <span>(@Model.ConfNumber)</span> 
                    </p>
                    <p>
                        check here for any files that you or the doctors of your subsequents requestors have attached for you to
                        review.
                    </p>
                    <form asp-action="PatientFileSave" asp-route-id="@Model.ReqId" class="form" enctype="multipart/form-data">
                        <div class="border rounded">
                            <label for="fileinput" class="selectfile rounded d-flex justify-content-between">
                                <p class="m-2" id="form-label">Select File</p>
                                <input type="file" asp-for="@Model.View.UploadFile" onchange="getFileData(this)" multiple="multiple" id="fileinput" style="display: none;">@* asp-for="@Model.FirstOrDefault().View.UploadFile" *@
                                <a>
                                    <button type="submit" class="upload-btn p-2 border-0">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                             class="bi bi-cloud-arrow-up" viewBox="0 0 16 16">
                                            <path fill-rule="evenodd"
                                                  d="M7.646 5.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 6.707V10.5a.5.5 0 0 1-1 0V6.707L6.354 7.854a.5.5 0 1 1-.708-.708z" />
                                            <path d="M4.406 3.342A5.53 5.53 0 0 1 8 2c2.69 0 4.923 2 5.166 4.579C14.758 6.804 16 8.137 16 9.773 16 11.569 14.502 13 12.687 13H3.781C1.708 13 0 11.366 0 9.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383m.653.757c-.757.653-1.153 1.44-1.153 2.056v.448l-.445.049C2.064 6.805 1 7.952 1 9.318 1 10.785 2.23 12 3.781 12h8.906C13.98 12 15 10.988 15 9.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 4.825 10.328 3 8 3a4.53 4.53 0 0 0-2.941 1.1z" />
                                        </svg>
                                        <span class="d-none d-sm-inline">Upload</span>
                                    </button>
                                </a>
                            </label>
                        </div>
                    </form>
                    <div class="w-100 bg-transparent">
                        <div class="d-flex justify-content-between my-3 ">
                            <h4>Documents</h4>
                             
                            <div class="d-flex">

                                <a asp-action="DownloadAll" asp-route-id="@Model.ReqId" class="text-info text-decoration-none">
                                    <button class="btn border rounded-3 btn-outline-info mb-1 border-info mb-1 me-2">
                                    <span class="d-none d-sm-block">Download All</span>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                         class="bi bi-cloud-arrow-down-fill d-sm-none text-info" viewBox="0 0 16 16">
                                        <path d="M8 2a5.53 5.53 0 0 0-3.594 1.342c-.766.66-1.321 1.52-1.464 2.383C1.266 6.095 0 7.555 0 9.318 0 11.366 1.708 13 3.781 13h8.906C14.502 13 16 11.57 16 9.773c0-1.636-1.242-2.969-2.834-3.194C12.923 3.999 10.69 2 8 2m2.354 6.854-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 1 1 .708-.708L7.5 9.293V5.5a.5.5 0 0 1 1 0v3.793l1.146-1.147a.5.5 0 0 1 .708.708" />
                                    </svg>
                                    </button>
                                    
                                </a>
                                <a asp-action="DeleteAll" asp-route-id="@Model.ReqId" class="text-info text-decoration-none">
                                    <button class="btn border rounded-3 btn-outline-info mb-1 border-info me-2">
                                        <span class="d-none d-sm-block">Delete All</span>
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                             class="bi bi-cloud-arrow-down-fill d-sm-none text-info" viewBox="0 0 16 16">
                                            <path d="M8 2a5.53 5.53 0 0 0-3.594 1.342c-.766.66-1.321 1.52-1.464 2.383C1.266 6.095 0 7.555 0 9.318 0 11.366 1.708 13 3.781 13h8.906C14.502 13 16 11.57 16 9.773c0-1.636-1.242-2.969-2.834-3.194C12.923 3.999 10.69 2 8 2m2.354 6.854-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 1 1 .708-.708L7.5 9.293V5.5a.5.5 0 0 1 1 0v3.793l1.146-1.147a.5.5 0 0 1 .708.708" />
                                        </svg>
                                    </button>
                                </a>
                                <a asp-action="SendMail" asp-route-id="@Model.ReqId" class="text-info text-decoration-none">
                                    <button class="btn border rounded-3 btn-outline-info mb-1 border-info me-2">
                                        <span class="d-none d-sm-block">Send Mail</span>
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                             class="bi bi-cloud-arrow-down-fill d-sm-none text-info" viewBox="0 0 16 16">
                                            <path d="M8 2a5.53 5.53 0 0 0-3.594 1.342c-.766.66-1.321 1.52-1.464 2.383C1.266 6.095 0 7.555 0 9.318 0 11.366 1.708 13 3.781 13h8.906C14.502 13 16 11.57 16 9.773c0-1.636-1.242-2.969-2.834-3.194C12.923 3.999 10.69 2 8 2m2.354 6.854-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 1 1 .708-.708L7.5 9.293V5.5a.5.5 0 0 1 1 0v3.793l1.146-1.147a.5.5 0 0 1 .708.708" />
                                        </svg>
                                    </button>
                                </a>
                            </div>
                            
                        </div>
                    </div>
                    <table class="table">
                        <thead>
                            <div>
                            <tr>
                                <th scope="col">Document</th>
                                <th scope="col">Upload Date<i>&uarr;</i></th>
                                <th scope="col">Actions</th>

                            </tr>
                            </div>
                        </thead>
                        <tbody> 
                            @foreach (var item in Model.File)
                            {
                               
                            <tr>
                                <td>
                                    <span>
                                        <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-file-earmark-pdf-fill text-danger" viewBox="0 0 16 16">
                                            <path d="M5.523 12.424q.21-.124.459-.238a8 8 0 0 1-.45.606c-.28.337-.498.516-.635.572l-.035.012a.3.3 0 0 1-.026-.044c-.056-.11-.054-.216.04-.36.106-.165.319-.354.647-.548m2.455-1.647q-.178.037-.356.078a21 21 0 0 0 .5-1.05 12 12 0 0 0 .51.858q-.326.048-.654.114m2.525.939a4 4 0 0 1-.435-.41q.344.007.612.054c.317.057.466.147.518.209a.1.1 0 0 1 .026.064.44.44 0 0 1-.06.2.3.3 0 0 1-.094.124.1.1 0 0 1-.069.015c-.09-.003-.258-.066-.498-.256M8.278 6.97c-.04.244-.108.524-.2.829a5 5 0 0 1-.089-.346c-.076-.353-.087-.63-.046-.822.038-.177.11-.248.196-.283a.5.5 0 0 1 .145-.04c.013.03.028.092.032.198q.008.183-.038.465z" />
                                            <path fill-rule="evenodd" d="M4 0h5.293A1 1 0 0 1 10 .293L13.707 4a1 1 0 0 1 .293.707V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2m5.5 1.5v2a1 1 0 0 0 1 1h2zM4.165 13.668c.09.18.23.343.438.419.207.075.412.04.58-.03.318-.13.635-.436.926-.786.333-.401.683-.927 1.021-1.51a11.7 11.7 0 0 1 1.997-.406c.3.383.61.713.91.95.28.22.603.403.934.417a.86.86 0 0 0 .51-.138c.155-.101.27-.247.354-.416.09-.181.145-.37.138-.563a.84.84 0 0 0-.2-.518c-.226-.27-.596-.4-.96-.465a5.8 5.8 0 0 0-1.335-.05 11 11 0 0 1-.98-1.686c.25-.66.437-1.284.52-1.794.036-.218.055-.426.048-.614a1.24 1.24 0 0 0-.127-.538.7.7 0 0 0-.477-.365c-.202-.043-.41 0-.601.077-.377.15-.576.47-.651.823-.073.34-.04.736.046 1.136.088.406.238.848.43 1.295a20 20 0 0 1-1.062 2.227 7.7 7.7 0 0 0-1.482.645c-.37.22-.699.48-.897.787-.21.326-.275.714-.08 1.103" />
                                        </svg>
                                    </span> @item.FileName
                                </td>
                                <td>
                                        @item.CreatedDate.ToString("MMM dd,yyyy", CultureInfo.InvariantCulture)
                                </td>
                                <td>
                                <a asp-action="Download" asp-route-id="@item.RequestWiseFileId">
                                        @* asp-route-id="@item.View.FileId" *@
                                        <button class="btn border-info btn-outline-dark">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-cloud-download text-info" viewBox="0 0 16 16">
                                                <path d="M4.406 1.342A5.53 5.53 0 0 1 8 0c2.69 0 4.923 2 5.166 4.579C14.758 4.804 16 6.137 16 7.773 16 9.569 14.502 11 12.687 11H10a.5.5 0 0 1 0-1h2.688C13.979 10 15 8.988 15 7.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 2.825 10.328 1 8 1a4.53 4.53 0 0 0-2.941 1.1c-.757.652-1.153 1.438-1.153 2.055v.448l-.445.049C2.064 4.805 1 5.952 1 7.318 1 8.785 2.23 10 3.781 10H6a.5.5 0 0 1 0 1H3.781C1.708 11 0 9.366 0 7.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383" />
                                                <path d="M7.646 15.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 14.293V5.5a.5.5 0 0 0-1 0v8.793l-2.146-2.147a.5.5 0 0 0-.708.708z" />
                                            </svg>
                                        </button>
                                    </a>
                                <a asp-action="Delete" asp-route-id="@item.RequestWiseFileId">
                                    <button class="btn border-info btn-outline-dark">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash3 text-info" viewBox="0 0 16 16">
                                            <path d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5M11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47M8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5" />
                                        </svg>
                                    </button>
                                </a>
                                </td>


                            </tr>
                                

                            } 
                        </tbody>
                    </table>
            </div>
        </div>


    </div>
    



    </div>


    <script>
    var light = 1;
    function DarkMode() {
        if (light == 1) {
            document.body.setAttribute('data-bs-theme', 'dark');

            light = 0;
        }
        else {
            document.body.setAttribute('data-bs-theme', 'light');


            light = 1;
        }
    }
    </script>
